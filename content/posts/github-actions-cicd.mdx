---
title: "GitHub Actions으로 CI/CD 파이프라인 구축하기"
description: "GitHub Actions의 기본 개념부터 Next.js 프로젝트의 자동 배포까지, CI/CD 파이프라인을 단계별로 구축합니다."
date: "2026-02-03"
category: "tutorial"
tags: ["GitHub Actions", "CI/CD", "DevOps", "자동화"]
enableAds: true
---

코드를 push할 때마다 수동으로 테스트를 실행하고, 빌드하고, 배포하는 것은 시간 낭비입니다. CI/CD(지속적 통합/지속적 배포)를 설정하면 이 모든 과정이 자동으로 이루어집니다. GitHub Actions는 GitHub에 내장된 CI/CD 도구로, 별도의 서비스 없이 바로 사용할 수 있습니다.

## CI/CD란?

### CI (Continuous Integration)

코드 변경이 있을 때마다 자동으로 빌드하고 테스트하는 것입니다. 여러 개발자가 동시에 작업할 때 코드 충돌이나 버그를 빠르게 발견할 수 있습니다.

### CD (Continuous Deployment)

테스트를 통과한 코드를 자동으로 프로덕션 환경에 배포하는 것입니다. 수동 배포 과정에서 발생할 수 있는 실수를 방지하고, 배포 주기를 단축합니다.

## GitHub Actions 기본 개념

### 핵심 용어

- **Workflow**: 자동화할 전체 프로세스. `.github/workflows/` 디렉토리에 YAML 파일로 정의합니다.
- **Event (Trigger)**: 워크플로우를 실행하는 이벤트. `push`, `pull_request`, `schedule` 등이 있습니다.
- **Job**: 워크플로우 내의 작업 단위. 같은 러너에서 실행되는 스텝의 모음입니다.
- **Step**: Job 내의 개별 작업. 명령어를 실행하거나 액션을 사용합니다.
- **Action**: 재사용 가능한 작업 단위. GitHub Marketplace에서 다양한 액션을 찾을 수 있습니다.
- **Runner**: 워크플로우가 실행되는 서버. GitHub에서 제공하는 호스팅 러너를 무료로 사용할 수 있습니다.

### 첫 번째 워크플로우

```yaml
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: "npm"

      - name: Install dependencies
        run: npm ci

      - name: Run linter
        run: npm run lint

      - name: Run tests
        run: npm test

      - name: Build
        run: npm run build
```

이 워크플로우는 `main` 브랜치에 push하거나 PR을 생성할 때 자동으로 실행됩니다.

<InArticleAd />

## 실전 워크플로우 구성

### Next.js 프로젝트 CI

```yaml
name: Next.js CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  lint-and-type-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: "npm"
      - run: npm ci
      - run: npm run lint
      - run: npx tsc --noEmit

  test:
    runs-on: ubuntu-latest
    needs: lint-and-type-check
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: "npm"
      - run: npm ci
      - run: npm test -- --coverage

  build:
    runs-on: ubuntu-latest
    needs: [lint-and-type-check, test]
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: "npm"
      - run: npm ci
      - run: npm run build
```

### Job 간 의존성

`needs` 키워드로 Job의 실행 순서를 지정할 수 있습니다. 위 예시에서는 lint가 성공해야 test가 실행되고, 둘 다 성공해야 build가 실행됩니다.

### 캐싱으로 속도 향상

`actions/setup-node`의 `cache: "npm"` 옵션은 `node_modules`를 캐싱하여 의존성 설치 시간을 크게 줄여줍니다. 첫 실행에서 캐시를 생성하고, 이후 실행에서는 캐시를 재사용합니다.

## 환경 변수와 시크릿

### 시크릿 설정

API 키, 배포 토큰 등 민감한 정보는 GitHub 시크릿에 저장합니다. Repository Settings > Secrets and variables > Actions에서 설정합니다.

```yaml
steps:
  - name: Deploy
    env:
      DEPLOY_TOKEN: ${{ secrets.DEPLOY_TOKEN }}
    run: |
      curl -X POST https://api.example.com/deploy \
        -H "Authorization: Bearer $DEPLOY_TOKEN"
```

### 환경 변수

시크릿이 아닌 설정 값은 `env`로 정의합니다.

```yaml
env:
  NODE_ENV: production
  NEXT_PUBLIC_SITE_URL: https://example.com

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - run: echo $NEXT_PUBLIC_SITE_URL
```

## 유용한 워크플로우 패턴

### 자동 라벨링

PR의 변경 파일에 따라 자동으로 라벨을 추가합니다.

```yaml
name: Auto Label

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  label:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/labeler@v5
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
```

### 스케줄 실행

매일 특정 시간에 실행하는 크론 작업입니다.

```yaml
on:
  schedule:
    - cron: "0 9 * * 1-5"  # 평일 오전 9시 (UTC)
```

### Matrix 전략

여러 Node.js 버전에서 동시에 테스트합니다.

```yaml
jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [18, 20, 22]
    steps:
      - uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node-version }}
      - run: npm test
```

## Vercel 자동 배포

Vercel은 GitHub 연동만으로 자동 배포가 가능합니다. 하지만 테스트를 통과한 후에만 배포하고 싶다면 GitHub Actions와 조합할 수 있습니다.

```yaml
name: Deploy to Vercel

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: "npm"
      - run: npm ci
      - run: npm test

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: amondnet/vercel-action@v25
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}
          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}
          vercel-args: "--prod"
```

## 무료 사용 한도

GitHub Actions는 public 저장소에서 무료로 사용할 수 있습니다. private 저장소에서는 월 2,000분의 무료 한도가 있습니다. 무료 한도를 효율적으로 사용하기 위해 캐싱과 조건부 실행을 적극 활용하세요.

## 마무리

GitHub Actions는 진입 장벽이 낮으면서도 강력한 CI/CD 도구입니다. YAML 문법만 알면 복잡한 자동화 파이프라인을 구축할 수 있습니다. 처음에는 간단한 린트와 빌드 체크부터 시작하고, 점차 테스트, 배포, 알림 등을 추가해 나가면 됩니다.

가장 중요한 것은 CI/CD를 프로젝트 초기에 설정하는 것입니다. 나중에 추가하려면 기존 코드의 린트 에러와 테스트 부재를 한꺼번에 해결해야 하므로 훨씬 어렵습니다.
